<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  xml:lang="en" lang="en" >

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="generator" content="Hugo 0.135.0">

	<title>jqGrid: Handling array data !!! &middot; A Developer&#39;s Experience</title>

	<meta name="description" content="" />

	

	<link type="text/css" rel="stylesheet" href="/css/print.css" media="print">
	<link type="text/css" rel="stylesheet" href="/css/poole.css">
	<link type="text/css" rel="stylesheet" href="/css/hyde.css">

	
<style type="text/css">
  .sidebar {
    background-color: #347B98;
  }

  .read-more-link a {
    border-color: #347B98;
  }

  .pagination li a {
    color: #347B98;
    border: 1px solid #347B98;
  }

  .pagination li.active a {
    background-color: #347B98;
  }

  .pagination li a:hover {
    background-color: #347B98;
    opacity: 0.75;
  }

  footer a,
  .content a,
  .related-posts li a:hover {
    color: #347B98;
  }
</style>



	<link type="text/css" rel="stylesheet" href="/css/blockquote.css"><link type="text/css" rel="stylesheet" href="/css/custom.css">

	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">

	<link rel="stylesheet"
				href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
				integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
				crossorigin="anonymous" />

	<link rel="apple-touch-icon-precomposed"
				sizes="144x144"
				href="/images/apple-touch-icon-144-precomposed.png">

	<link rel="shortcut icon" href="/images/favicon.png">

	
	</head>

<body>
	<aside class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      
        
        <div class="author-image">
          <a href="/">
            <img 
              src="/images/profile.png" 
              class="img-circle img-headshot center" 
              alt="Profile Picture">
          </a>
        </div>
        
      

      <h1>A Developer&#39;s Experience</h1>

      
      <p class="lead">The romantic image of an über-programmer is someone who fires up Emacs, types like a machine gun, and delivers a flawless final product from scratch. A more accurate image would be someone who stares quietly into space for a few minutes and then says Hmm. I think I’ve seen something like this before – John D. Cook</p>
      
    </div>

    <hr />

    <nav>
      <ul class="sidebar-nav">
        
        <li>
          <a href="/post/">Posts</a>
        </li><li>
          <a href="/pages">Pages</a>
        </li><li>
          <a href="/about/">About</a>
        </li><li>
          <a href="/quotations">Qs</a>
        </li>
      </ul>
    </nav>

    <section class="social-icons">
      
      <a href="https://stackoverflow.com/users/495612" rel="me" title="Stackoverflow" target="_blank">
        <i class="fab fa-stack-overflow" aria-hidden="true"></i>
      </a>
      
      <a href="https://github.com/vivekragunathan" rel="me" title="GitHub" target="_blank">
        <i class="fab fa-github" aria-hidden="true"></i>
      </a>
      
      <a href="https://twitter.com/higherkindedtpe" rel="me" title="Twitter" target="_blank">
        <i class="fab fa-twitter" aria-hidden="true"></i>
      </a>
      
    </section>

    <section class="blog-search-section">
      <div class="blog-search-box">
	
	<button class="blog-search-btn"><i class="fas fa-search"></i></button>
	<input type="text" class="blog-search-input" placeholder="Type to Search...">

	<form style='display: none;' action='/search/' method="get">
		<input name="q" type="text">
	</form>
</div>
    </section>
  </div>
</aside>


	<main class="content container">
		<div class="post">
  
  <div class="image featured ">
  	
	</div>

  <h1>jqGrid: Handling array data !!!</h1>


  <div class="post-date">
    <time datetime="2014-05-23T01:43:15Z">May 23, 2014</time> &middot; 3 min read
  </div>

  <p>This post is primarily a personal reference. I also consider this a tribute to <a href="http://stackoverflow.com/users/315935/oleg">Oleg</a>, who played a big role in improving my understanding of the jqGrid internals – the way it handles source data types, which, if I may say, led him in discovering a bug in jqGrid.</p>
<p>If you are working with local array data as the source for jqGrid, meaning you will get the data from the server but want the jqGrid not to talk to the server anymore, and want to have custom handling of the edit functionality/form and delete functionality, it is not going to be straightforward – you need to have a decent understanding of how jqGrid works, and you should be aware of the bug Oleg pointed in our discussion. I repeat this is all about using jqGrid to manage array data locally, no posting to server when you edit or delete, which is where the bug is.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>$(<span style="color:#f1fa8c">&#39;#grid&#39;</span>).jqGrid(<span style="color:#f1fa8c">&#39;navGrid&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f1fa8c">&#39;#pager&#39;</span>, {
</span></span><span style="display:flex;"><span>        recreateForm<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">true</span>,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        add<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>        search<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>        refresh<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        edit<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">true</span>,
</span></span><span style="display:flex;"><span>        edittext<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;Edit&#39;</span>,
</span></span><span style="display:flex;"><span>        editicon<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;ui-icon-tag&#39;</span>,
</span></span><span style="display:flex;"><span>        editurl<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;clientArray&#39;</span>,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        del<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">true</span>,
</span></span><span style="display:flex;"><span>        deltext<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;Delete&#39;</span>
</span></span><span style="display:flex;"><span>    }, { <span style="color:#6272a4">// edit options
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>        editCaption<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;Fix Error Record&#39;</span>,
</span></span><span style="display:flex;"><span>        url<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;clientArray&#39;</span>,
</span></span><span style="display:flex;"><span>        recreateForm<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">true</span>,
</span></span><span style="display:flex;"><span>        closeAfterEdit<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">true</span>,
</span></span><span style="display:flex;"><span>        reloadAfterSubmit<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">false</span>,
</span></span><span style="display:flex;"><span>        beforeShowForm<span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> (form) {
</span></span><span style="display:flex;"><span>            $(<span style="color:#f1fa8c">&#39;#editmod&#39;</span> <span style="color:#ff79c6">+</span> gridId).addClass(<span style="color:#f1fa8c">&#39;grid-dialog&#39;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#6272a4">// You can disable or alter certain fields in the form if you need.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>        },
</span></span><span style="display:flex;"><span>        processing<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">true</span>, <span style="color:#6272a4">// very important or the custom handling will not work!
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">// Edit - Custom handling of submit button in the edit form
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>        onclicksubmit<span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> (options, postdata) {
</span></span><span style="display:flex;"><span>            <span style="color:#8be9fd;font-style:italic">var</span> gridId <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#39;grid&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#8be9fd;font-style:italic">var</span> idInPostdata <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">this</span>.id <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#34;_id&#34;</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">if</span> (postdata[COL_MODEL_ROW_NO] <span style="color:#ff79c6">==</span> <span style="color:#ff79c6">undefined</span> <span style="color:#ff79c6">&amp;&amp;</span> postdata[idInPostdata] <span style="color:#ff79c6">!=</span> <span style="color:#ff79c6">undefined</span>) {
</span></span><span style="display:flex;"><span>                postdata[COL_MODEL_ROW_NO] <span style="color:#ff79c6">=</span> postdata[idInPostdata];
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#8be9fd;font-style:italic">var</span> clone <span style="color:#ff79c6">=</span> jQuery.extend(<span style="color:#ff79c6">true</span>, {}, postdata);
</span></span><span style="display:flex;"><span>            $(gridSelector).jqGrid(<span style="color:#f1fa8c">&#39;setRowData&#39;</span>, postdata[COL_MODEL_ROW_NO], clone);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">var</span> d_index <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>, d_length <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">this</span>.p.data.length; d_index <span style="color:#ff79c6">&amp;</span> lt; d_length;
</span></span><span style="display:flex;"><span>                <span style="color:#ff79c6">++</span>d_index) {
</span></span><span style="display:flex;"><span>                <span style="color:#8be9fd;font-style:italic">var</span> p_data_row <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">this</span>.p.data[d_index];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ff79c6">if</span> (p_data_row[INDEX_ROW] <span style="color:#ff79c6">==</span> postdata[COL_MODEL_ROW_NO]) {
</span></span><span style="display:flex;"><span>                    <span style="color:#8be9fd;font-style:italic">var</span> dataObject <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">this</span>.p.data[d_index];
</span></span><span style="display:flex;"><span>                    dataObject[INDEX_NAME] <span style="color:#ff79c6">=</span> postdata[COL_MODEL_NAME];
</span></span><span style="display:flex;"><span>                    dataObject[INDEX_AGE] <span style="color:#ff79c6">=</span> postdata[COL_MODEL_AGE];
</span></span><span style="display:flex;"><span>                    dataObject[INDEX_STATE] <span style="color:#ff79c6">=</span> postdata[COL_MODEL_STATE];
</span></span><span style="display:flex;"><span>                    <span style="color:#ff79c6">break</span>;
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">if</span> (options.closeAfterEdit) {
</span></span><span style="display:flex;"><span>                $.jgrid.hideModal(<span style="color:#f1fa8c">&#39;#editmod&#39;</span> <span style="color:#ff79c6">+</span> gridId, {
</span></span><span style="display:flex;"><span>                    gb<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;#gbox_&#39;</span> <span style="color:#ff79c6">+</span> gridId,
</span></span><span style="display:flex;"><span>                    jqm<span style="color:#ff79c6">:</span> options.jqModal,
</span></span><span style="display:flex;"><span>                    onClose<span style="color:#ff79c6">:</span> options.onClose
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            options.processing <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">true</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">return</span> {};
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }, {}, <span style="color:#6272a4">// add options,
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    { <span style="color:#6272a4">// delete options
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>        processing<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">true</span>, <span style="color:#6272a4">// very important, else the custom handling will not work!
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">// Custom handling of the delete functionality.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>        <span style="color:#6272a4">// Prevents posting to the server but handles everything locally.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>        onclickSubmit<span style="color:#ff79c6">:</span> <span style="color:#8be9fd;font-style:italic">function</span> (options, id) {
</span></span><span style="display:flex;"><span>            <span style="color:#8be9fd;font-style:italic">var</span> grid <span style="color:#ff79c6">=</span> $(<span style="color:#f1fa8c">&#39;#grid&#39;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#8be9fd;font-style:italic">var</span> gridData <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">this</span>.p.data;
</span></span><span style="display:flex;"><span>            <span style="color:#8be9fd;font-style:italic">var</span> selectedRows <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">this</span>.p.multiselect <span style="color:#ff79c6">?</span> <span style="color:#ff79c6">this</span>.p.selarrrow <span style="color:#ff79c6">:</span> [<span style="color:#ff79c6">this</span>.p.selrow];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">var</span> index <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>, length <span style="color:#ff79c6">=</span> selectedRows.length; index <span style="color:#ff79c6">&amp;</span> lt; length; <span style="color:#ff79c6">++</span>index) {
</span></span><span style="display:flex;"><span>                <span style="color:#8be9fd;font-style:italic">var</span> rowId <span style="color:#ff79c6">=</span> selectedRows[index];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">var</span> pd_index <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>, pd_length <span style="color:#ff79c6">=</span> gridData.length; pd_index <span style="color:#ff79c6">&amp;</span> lt; pd_length;
</span></span><span style="display:flex;"><span>                    <span style="color:#ff79c6">++</span>pd_index) {
</span></span><span style="display:flex;"><span>                    <span style="color:#8be9fd;font-style:italic">var</span> gd_row <span style="color:#ff79c6">=</span> gridData[pd_index];
</span></span><span style="display:flex;"><span>                    <span style="color:#ff79c6">if</span> (gd_row[INDEX_ROW_NO] <span style="color:#ff79c6">==</span> rowId) {
</span></span><span style="display:flex;"><span>                        gridData.splice(pd_index, <span style="color:#bd93f9">1</span>);
</span></span><span style="display:flex;"><span>                        <span style="color:#ff79c6">break</span>;
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#6272a4">// Refresh grid to previous page if the current page is the
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>            <span style="color:#6272a4">// last page in the grid; so that when all records of the
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>            <span style="color:#6272a4">// last page are deleted, we show the previous page.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>            <span style="color:#ff79c6">if</span> (<span style="color:#ff79c6">this</span>.p.page <span style="color:#ff79c6">===</span> <span style="color:#ff79c6">this</span>.p.lastpage) {
</span></span><span style="display:flex;"><span>                grid.jqGrid(<span style="color:#f1fa8c">&#39;setGridParam&#39;</span>, {
</span></span><span style="display:flex;"><span>                    page<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">this</span>.p.page <span style="color:#ff79c6">-</span> <span style="color:#bd93f9">1</span>
</span></span><span style="display:flex;"><span>                });
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#6272a4">// Refresh the grid to load the changes
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>            grid.trigger(<span style="color:#f1fa8c">&#39;reloadGrid&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            $.jgrid.hideModal(<span style="color:#f1fa8c">&#39;#delmod&#39;</span> <span style="color:#ff79c6">+</span> gridId, {
</span></span><span style="display:flex;"><span>                gb<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;#gbox_&#39;</span> <span style="color:#ff79c6">+</span> gridId,
</span></span><span style="display:flex;"><span>                jqm<span style="color:#ff79c6">:</span> options.jqModal,
</span></span><span style="display:flex;"><span>                onClose<span style="color:#ff79c6">:</span> options.onClose
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            options.processing <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">true</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">return</span> {};
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }, {} <span style="color:#6272a4">// search options
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>);
</span></span></code></pre></div><p>Hope this post helps any poor soul battling the same or similar problem. You should definitely check out the <a href="http://stackoverflow.com/questions/21194964/jqgrid-form-edits-saved-to-row-but-all-changes-lost-when-paging-back-or-forth">question</a> I had originally raised at <a href="https:www.stackoverflow.com">StackOverflow.com</a>, and the interesting discussion thereon.</p>
</div>


	</main>

	<footer>
  <div>
    &copy;  2024

    

    
  </div>
</footer>


	<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
					integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0="
					crossorigin="anonymous"></script>

	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding:wght@400;700&display=swap" />









	<script src="https://unpkg.com/lunr@2.3.9/lunr.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="/js/search.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

	

	<script>
	window.store = {
	  
	  
	}

	hljs.highlightAll();

	document
		.querySelector('.blog-search-input')
		.addEventListener('keyup', function (event) {
			event.preventDefault();

			if (event.keyCode === 13) {
				document.querySelector('.blog-search-box>form>input').value = 
					document.querySelector('.blog-search-input').value;

				document
					.querySelector('.blog-search-box>form')
					.submit(
);
			}
		});
	</script>

	
</body>

</html>
