<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  xml:lang="en" lang="en" >

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=51234&amp;path=livereload" data-no-instant defer></script>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="generator" content="Hugo 0.125.5">

	<title>Selective Combinations &middot; A Developer&#39;s Experience</title>

	<meta name="description" content="" />

	

	<link type="text/css" rel="stylesheet" href="/css/print.css" media="print">
	<link type="text/css" rel="stylesheet" href="/css/poole.css">
	<link type="text/css" rel="stylesheet" href="/css/hyde.css">

	
<style type="text/css">
  .sidebar {
    background-color: #347B98;
  }

  .read-more-link a {
    border-color: #347B98;
  }

  .pagination li a {
    color: #347B98;
    border: 1px solid #347B98;
  }

  .pagination li.active a {
    background-color: #347B98;
  }

  .pagination li a:hover {
    background-color: #347B98;
    opacity: 0.75;
  }

  footer a,
  .content a,
  .related-posts li a:hover {
    color: #347B98;
  }
</style>



	<link type="text/css" rel="stylesheet" href="/css/blockquote.css"><link type="text/css" rel="stylesheet" href="/css/custom.css">

	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">

	<link rel="stylesheet"
				href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
				integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
				crossorigin="anonymous" />

	<link rel="apple-touch-icon-precomposed"
				sizes="144x144"
				href="/images/apple-touch-icon-144-precomposed.png">

	<link rel="shortcut icon" href="/images/favicon.png">

	
	</head>

<body>
	<aside class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      
        
        <div class="author-image">
          <a href="/">
            <img 
              src="/images/profile.png" 
              class="img-circle img-headshot center" 
              alt="Profile Picture">
          </a>
        </div>
        
      

      <h1>A Developer&#39;s Experience</h1>

      
      <p class="lead">The romantic image of an über-programmer is someone who fires up Emacs, types like a machine gun, and delivers a flawless final product from scratch. A more accurate image would be someone who stares quietly into space for a few minutes and then says Hmm. I think I’ve seen something like this before – John D. Cook</p>
      
    </div>

    <hr />

    <nav>
      <ul class="sidebar-nav">
        
        <li>
          <a href="/post/">Posts</a>
        </li><li>
          <a href="/pages">Pages</a>
        </li><li>
          <a href="/about/">About</a>
        </li><li>
          <a href="/quotations">Qs</a>
        </li>
      </ul>
    </nav>

    <section class="social-icons">
      
      <a href="https://stackoverflow.com/users/495612" rel="me" title="Stackoverflow" target="_blank">
        <i class="fab fa-stack-overflow" aria-hidden="true"></i>
      </a>
      
      <a href="https://github.com/vivekragunathan" rel="me" title="GitHub" target="_blank">
        <i class="fab fa-github" aria-hidden="true"></i>
      </a>
      
      <a href="https://twitter.com/higherkindedtpe" rel="me" title="Twitter" target="_blank">
        <i class="fab fa-twitter" aria-hidden="true"></i>
      </a>
      
    </section>

    <section class="blog-search-section">
      <div class="blog-search-box">
	
	<button class="blog-search-btn"><i class="fas fa-search"></i></button>
	<input type="text" class="blog-search-input" placeholder="Type to Search...">

	<form style='display: none;' action='//localhost:51234/search/' method="get">
		<input name="q" type="text">
	</form>
</div>
    </section>
  </div>
</aside>


	<main class="content container">
		<div class="post">
  
  <div class="image featured ">
  	
	</div>

  <h1>Selective Combinations</h1>


  <div class="post-date">
    <time datetime="2016-05-16T07:00:08Z">May 16, 2016</time> &middot; 4 min read
  </div>

  <p>Consider this scenario:</p>
<blockquote>
<p>You have a list of strings with which you have generate ordered selective combinations of strings starting with the first string in the list. Let us say the list of strings is <code>abc</code>, <code>def</code> and <code>ghi</code>. I have to generate ordered combinations of the above list restricted to the ones starting with <code>abc</code>.</p>
</blockquote>
<p>So that would be as follows:</p>
<pre tabindex="0"><code>abc def ghi

abc def

abc ghi

abc
</code></pre><p>If the problem sounds abstract, here is the real situation. <!--more--> I have a list of parameters with which I have to select the best matching and available resource (a file in my application config folder). Let us say, the parameter values are</p>
<p><code>config</code>, <code>type</code>, and <a href=""><code>Locale</code></a> (say <code>en_US</code> for this discussion). So I have to go find the best matching file for the given parameters but in the following order:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>config\_type\_en_US.<span style="color:#50fa7b">json</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>config_type.<span style="color:#50fa7b">json</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>config\_en\_US.<span style="color:#50fa7b">json</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>config.<span style="color:#50fa7b">json</span>
</span></span></code></pre></div><p>Not a difficult one, eh? Only that, at the time of this writing, the number of parameters was not fixed but could be more (definitely not hundreds or thousands) but more than three.</p>
<p><strong>The non-solution</strong></p>
<p>Alright, let us not talk about generating all possible combinations of the given list of strings, and pluck the ones starting with the first string in the list.</p>
<p><strong>Solution #1</strong></p>
<p>The conventional technique or the <em>don’t overengineer</em> advice is to write a helper method with a bunch of nested <code>if</code>s; something I will not allow myself to succumb to. This helper method, although appears to be insignificant in the might of other things in the application, is going to be source of several problems later; at least the one related to resource selection.</p>
<p><strong>Solution #3</strong></p>
<p>A slightly better way is to have a predefined ordered set of strings that represent the filename pattern such as:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">private</span> <span style="color:#8be9fd;font-style:italic">static</span> <span style="color:#8be9fd;font-style:italic">final</span> String<span style="color:#ff79c6">[]</span> resourceSelectionPatterns <span style="color:#ff79c6">=</span> { 
</span></span><span style="display:flex;"><span>	<span style="color:#f1fa8c">&#34;{p1}\_{p2}\_{loc}&#34;</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#f1fa8c">&#34;{p1}_{p2}&#34;</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#f1fa8c">&#34;{p1}_{loc}&#34;</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#f1fa8c">&#34;{p1}&#34;</span>
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">public</span> <span style="color:#8be9fd;font-style:italic">static</span> String <span style="color:#50fa7b">findResource</span>(
</span></span><span style="display:flex;"><span>    String param1,
</span></span><span style="display:flex;"><span>    String param2,
</span></span><span style="display:flex;"><span>    Locale locale
</span></span><span style="display:flex;"><span>) <span style="color:#8be9fd;font-style:italic">throws</span> IOException {
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">for</span> (String pattern : patterns) {
</span></span><span style="display:flex;"><span>		<span style="color:#8be9fd;font-style:italic">final</span> String resName <span style="color:#ff79c6">=</span> 
</span></span><span style="display:flex;"><span>			pattern
</span></span><span style="display:flex;"><span>				.<span style="color:#50fa7b">replaceFirst</span>(<span style="color:#f1fa8c">&#34;{p1}&#34;</span>, param1)    
</span></span><span style="display:flex;"><span>				.<span style="color:#50fa7b">replaceFirst</span>(<span style="color:#f1fa8c">&#34;{p2}&#34;</span>, param2)
</span></span><span style="display:flex;"><span>				.<span style="color:#50fa7b">replaceFirst</span>(<span style="color:#f1fa8c">&#34;{loc}&#34;</span>, locale.<span style="color:#50fa7b">toString</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#8be9fd;font-style:italic">final</span> String fileName <span style="color:#ff79c6">=</span> resName <span style="color:#ff79c6">+</span> <span style="color:#f1fa8c">&#34;.json&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#ff79c6">if</span> (<span style="color:#ff79c6">new</span> File(fileName).<span style="color:#50fa7b">exists</span>()) {
</span></span><span style="display:flex;"><span>				<span style="color:#ff79c6">return</span> resName;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#ff79c6">throw</span> <span style="color:#ff79c6">new</span> IOException(<span style="color:#f1fa8c">&#34;No matching resource found&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This is better than nested <code>if</code>s which I would not bother to show the code. But even this is not really better. First, when there are more parameters in the equation, I have to go update <code>resourceSelectionPatterns</code> with the corresponding patterns and in the right order, and <code>findResource</code> method too. Also, the <code>replaceFirst</code> calls could create many throw-away <code>String</code>s. Of course, you can use a <code>StringBuilder</code> but that does not make it all better.</p>
<p><strong>Take a step back</strong></p>
<p>What I want is to generate the filename segments (or the equivalent patterns) <em>dynamically</em> based on the given set of input strings so that the solution is <em>write once and for all</em> (any count of parameters). We can assume that the order of the generated patterns is dictated by the order of the input strings.</p>
<p><strong>Finale</strong></p>
<p>If we can represent the input parameters in a more succinct format like a number and if we can identify a pattern among the numerical representation for each parameter, then we should be able to generate the filename segments <em>dynamically</em>.</p>
<p>If we assume each parameter to be a bit of an integer, first parameter being the most significant bit, then the bit representations for the input – <code>config</code>, <code>type</code>, <code>en_US</code> would be as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>0000 0111 <span style="color:#6272a4">// 7 =&gt; config\_type\_en_US</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>0000 0110 <span style="color:#6272a4">// 6 =&gt; config_type</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>0000 0101 <span style="color:#6272a4">// 5 =&gt; config\_en\_US.json</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>0000 0100 <span style="color:#6272a4">// 4 =&gt; config.json</span>
</span></span></code></pre></div><p>Well, I am sure you see the pattern. The integer representation of each filename segment decrements by 1 from the most specialized filename and stops at the least specialized one. This is true of any set of parameters and the selective combinations are generated dynamically.</p>
<p>Writing the code now for this solution should be a pie, the pleasure of which I will leave it to you.</p>
<p>Thanks to <a href="https://www.linkedin.com/in/azhaguthasan">Sammy</a> in helping me discover the solution!</p>
</div>


	</main>

	<footer>
  <div>
    &copy;  2024

    

    
  </div>
</footer>


	<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
					integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0="
					crossorigin="anonymous"></script>

	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding:wght@400;700&display=swap" />









	<script src="https://unpkg.com/lunr@2.3.9/lunr.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="/js/search.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

	

	<script>
	window.store = {
	  
	  
	}

	hljs.highlightAll();

	document
		.querySelector('.blog-search-input')
		.addEventListener('keyup', function (event) {
			event.preventDefault();

			if (event.keyCode === 13) {
				document.querySelector('.blog-search-box>form>input').value = 
					document.querySelector('.blog-search-input').value;

				document
					.querySelector('.blog-search-box>form')
					.submit(
);
			}
		});
	</script>

	
</body>

</html>
