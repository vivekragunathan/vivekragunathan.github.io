<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  xml:lang="en" lang="en" >

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="generator" content="Hugo 0.135.0">

	<title>Declaring Implicits &middot; A Developer&#39;s Experience</title>

	<meta name="description" content="" />

	

	<link type="text/css" rel="stylesheet" href="/css/print.css" media="print">
	<link type="text/css" rel="stylesheet" href="/css/poole.css">
	<link type="text/css" rel="stylesheet" href="/css/hyde.css">

	
<style type="text/css">
  .sidebar {
    background-color: #347B98;
  }

  .read-more-link a {
    border-color: #347B98;
  }

  .pagination li a {
    color: #347B98;
    border: 1px solid #347B98;
  }

  .pagination li.active a {
    background-color: #347B98;
  }

  .pagination li a:hover {
    background-color: #347B98;
    opacity: 0.75;
  }

  footer a,
  .content a,
  .related-posts li a:hover {
    color: #347B98;
  }
</style>



	<link type="text/css" rel="stylesheet" href="/css/blockquote.css"><link type="text/css" rel="stylesheet" href="/css/custom.css">

	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">

	<link rel="stylesheet"
				href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
				integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
				crossorigin="anonymous" />

	<link rel="apple-touch-icon-precomposed"
				sizes="144x144"
				href="/images/apple-touch-icon-144-precomposed.png">

	<link rel="shortcut icon" href="/images/favicon.png">

	
	</head>

<body>
	<aside class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      
        
        <div class="author-image">
          <a href="/">
            <img 
              src="/images/profile.png" 
              class="img-circle img-headshot center" 
              alt="Profile Picture">
          </a>
        </div>
        
      

      <h1>A Developer&#39;s Experience</h1>

      
      <p class="lead">The romantic image of an Ã¼ber-programmer is someone who fires up Emacs, types like a machine gun, and delivers a flawless final product from scratch. A more accurate image would be someone who stares quietly into space for a few minutes and then says Hmm. I think Iâ€™ve seen something like this before â€“ John D. Cook</p>
      
    </div>

    <hr />

    <nav>
      <ul class="sidebar-nav">
        
        <li>
          <a href="/post/">Posts</a>
        </li><li>
          <a href="/pages">Pages</a>
        </li><li>
          <a href="/about/">About</a>
        </li><li>
          <a href="/quotations">Qs</a>
        </li>
      </ul>
    </nav>

    <section class="social-icons">
      
      <a href="https://stackoverflow.com/users/495612" rel="me" title="Stackoverflow" target="_blank">
        <i class="fab fa-stack-overflow" aria-hidden="true"></i>
      </a>
      
      <a href="https://github.com/vivekragunathan" rel="me" title="GitHub" target="_blank">
        <i class="fab fa-github" aria-hidden="true"></i>
      </a>
      
      <a href="https://twitter.com/higherkindedtpe" rel="me" title="Twitter" target="_blank">
        <i class="fab fa-twitter" aria-hidden="true"></i>
      </a>
      
    </section>

    <section class="blog-search-section">
      <div class="blog-search-box">
	
	<button class="blog-search-btn"><i class="fas fa-search"></i></button>
	<input type="text" class="blog-search-input" placeholder="Type to Search...">

	<form style='display: none;' action='/search/' method="get">
		<input name="q" type="text">
	</form>
</div>
    </section>
  </div>
</aside>


	<main class="content container">
		<div class="post">
  
  <div class="image featured ">
  	
  		<img alt="featured_image" src="https://images.unsplash.com/photo-1504940760410-5d0c21cbf6f4?q=50">
  	
	</div>

  <h1>Declaring Implicits</h1>


  <div class="post-date">
    <time datetime="2024-09-15T00:00:00Z">Sep 15, 2024</time> &middot; 8 min read
  </div>

  <p>While implicits are easy to use, declaring them properly requires careful consideration. Because there are a few different ways you can declare implicits viz. extension methods, parameter values, type converters and dynamic instances. Each one has a specific purpose. For instance, dynamic instances enable recursive implicit resolution. Understanding the different ways of declaring implicits is critical in choosing the right one for the given scenario. It is also invaluable in troubleshooting subtle bugs and unexpected behavior related to implicit resolution. Let us dive in.</p>
<p>Implicits can be declared in one of the following ways:</p>
<ul>
<li>As <a href="#extension-methods">extension methods</a> (aka Implicit Classes)</li>
<li>As <a href="#parameter-values">parameter values</a></li>
<li>As <a href="#type-converters">type converters</a></li>
<li>As <a href="#dynamic-instances">dynamic instances</a></li>
</ul>
<p>In my opinion, the order listed above relates to its ease of comprehension.</p>
<h3 id="extension-methods">Extension Methods</h3>
<p>Extension method is a way to add new functionality to types  without modifying its original definition. The decision to not modify the original definition is either <em>intentional</em> or <em>consequential</em>.</p>
<ul>
<li>Intentional:
<ul>
<li>The new functionality is not a direct behavior of the original type. But serves as a utility   method. Adding it to the original type would pollute the public interface of the type.</li>
<li>The new functionality may span and serve type hierarchies instead of a single type. For instance, you want to add a <code>walk</code> method on all <code>Animal</code>s , and you would use it on a <code>Dog</code> type.</li>
</ul>
</li>
<li>Consequential:
<ul>
<li>You don&rsquo;t have (write) access to the original definition. You may be using the type from one of the dependent libraries.</li>
<li>Easier to express certain type constraints as an extension method (e.g <code>Option#flatten</code>).</li>
</ul>
</li>
</ul>
<p>With that literature of the way, here is how you would define extension methods in Scala (version 2).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#ff79c6">package</span> object utils <span style="color:#ff79c6">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">implicit</span> <span style="color:#ff79c6">final</span> <span style="color:#ff79c6">class</span> <span style="color:#50fa7b">StringOps</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">private</span> <span style="color:#ff79c6">val</span> str<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">String</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">extends</span> <span style="color:#50fa7b">AnyVal</span> <span style="color:#ff79c6">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">def</span> toTitleCase<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">String</span> <span style="color:#ff79c6">=</span>
</span></span><span style="display:flex;"><span>      <span style="color:#6272a4">// Not the best implementation but we are talking about implicits here. So, shove it under the rug.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>      s<span style="color:#ff79c6">.</span>split<span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;\\s+&#34;</span><span style="color:#ff79c6">).</span>map<span style="color:#ff79c6">(</span><span style="color:#ff79c6">_</span><span style="color:#ff79c6">.</span>capitalize<span style="color:#ff79c6">).</span>mkString<span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34; &#34;</span><span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#6272a4">// AI is thinking to help you add more methods here ðŸ˜€
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span><span style="color:#ff79c6">}</span>
</span></span></code></pre></div><p>The above extension method is an example of the consequential kind. Anyways, you would bring the extension methods in scope and use it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#ff79c6">import</span> utils._
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>println<span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;hello world&#34;</span><span style="color:#ff79c6">.</span>toTitleCase<span style="color:#ff79c6">)</span> <span style="color:#6272a4">// Guess what it prints!
</span></span></span></code></pre></div><p>The nice thing about extension methods is you can apply on companion objects too. For instance &hellip;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#ff79c6">implicit</span> <span style="color:#ff79c6">final</span> <span style="color:#ff79c6">class</span> <span style="color:#50fa7b">StringTypeOps</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">private</span> <span style="color:#ff79c6">val</span> str<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">String.</span><span style="color:#ff79c6">type</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">extends</span> <span style="color:#50fa7b">AnyVal</span> <span style="color:#ff79c6">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">def</span> isNullOrBlank<span style="color:#ff79c6">(</span>s<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">String</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Boolean</span> <span style="color:#ff79c6">=</span> s <span style="color:#ff79c6">==</span> <span style="color:#ff79c6">null</span> <span style="color:#ff79c6">||</span> s<span style="color:#ff79c6">.</span>isBlank
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// somewhere else in code ...
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span><span style="color:#ff79c6">val</span> name<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">String</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">...</span> <span style="color:#6272a4">// could be null if interacting with a Java API
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span><span style="color:#50fa7b">String</span><span style="color:#ff79c6">.</span>isNullOrEmpty<span style="color:#ff79c6">(</span>name<span style="color:#ff79c6">)</span>
</span></span></code></pre></div><h2 id="parameter-values">Parameter Values</h2>
<p>Implicit parameters, which I would say is the more widely known and used, are just like any parameters to a function except the compiler fills it in for you without having to explicitly mention it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#ff79c6">def</span> registerUser<span style="color:#ff79c6">(</span>input<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">RegisterUserInput</span><span style="color:#ff79c6">)(</span><span style="color:#ff79c6">implicit</span> ec<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">ExecutionContext</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Future</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">User</span><span style="color:#ff79c6">]</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">...</span>
</span></span></code></pre></div><p>The <code>registerUser</code> function is meant to perform a number of tasks to have a user registered. All of it <em>asynchronously</em> in a <code>Future</code>. Running a <code>Future</code> requires an <code>ExecutionContext</code><a href="craftdocs://open?blockId=823C1076-0197-4288-90BD-F75A378484E5&amp;spaceId=null"><sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></a>``, which if declared in scope (or in one of the places where the compiler will look for<a href="craftdocs://open?blockId=9860AA74-1B5F-4090-94FB-446EEC46E943&amp;spaceId=null"><sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></a>) will be picked up by the compiler and passed <em>implicitly</em> to <code>registerUser</code>.</p>
<p>Here is an example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#ff79c6">import</span> scala.concurrent.ExecutionContext
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">UserController</span> @Inject<span style="color:#ff79c6">()</span> <span style="color:#ff79c6">(...)</span> <span style="color:#ff79c6">extends</span> <span style="color:#50fa7b">BaseController</span> <span style="color:#ff79c6">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">implicit</span> <span style="color:#ff79c6">val</span> ec<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">ExecutionContext</span> <span style="color:#ff79c6">=</span> <span style="color:#50fa7b">ExecutionContext</span><span style="color:#ff79c6">.</span><span style="color:#50fa7b">Implicits</span><span style="color:#ff79c6">.</span>global
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#6272a4">// Entry point for /register path
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>  <span style="color:#ff79c6">def</span> registerUserPath<span style="color:#ff79c6">()</span> <span style="color:#ff79c6">=</span> <span style="color:#50fa7b">Action</span> <span style="color:#ff79c6">{</span> <span style="color:#ff79c6">implicit</span> request <span style="color:#ff79c6">=&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">val</span> input <span style="color:#ff79c6">=</span> pardonMeButDeserializeRequest<span style="color:#ff79c6">()</span> <span style="color:#6272a4">// ðŸ™„
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    <span style="color:#6272a4">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    service<span style="color:#ff79c6">.</span>registerUser<span style="color:#ff79c6">(</span>input<span style="color:#ff79c6">)</span> <span style="color:#6272a4">// ec declared above picked up for the implicit parameter
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>  <span style="color:#ff79c6">}</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">}</span>
</span></span></code></pre></div><p>Implicit parameters are ubiquitous in almost every bit of Scala code out there although its instantiation has a gotcha.</p>
<p>In the above example, the <em>same instance</em> of  <code>ExecutionContext</code> - <code>ec</code>, will be used as the implicit parameter even for another function (say <code>getUserInfo</code>) similar to  <code>registerUser</code>. Because <code>ec</code> is declared as a <code>val</code>.</p>
<p>If it was declared a <code>def</code>, every call that needs the implicit parameter would get a new instance. Try this out &hellip;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#6272a4">// Not the Show from cats but our version for the post.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span><span style="color:#ff79c6">trait</span> <span style="color:#50fa7b">Show</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">A</span><span style="color:#ff79c6">]</span> <span style="color:#ff79c6">{</span> <span style="color:#ff79c6">def</span> show<span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">A</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">:</span> <span style="color:#8be9fd">String</span> <span style="color:#ff79c6">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">object</span> <span style="color:#50fa7b">Blah</span> <span style="color:#ff79c6">extends</span> <span style="color:#50fa7b">App</span> <span style="color:#ff79c6">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">implicit</span> <span style="color:#ff79c6">def</span> showInt<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Show</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">Int</span><span style="color:#ff79c6">]</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">new</span> <span style="color:#50fa7b">Show</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">Int</span><span style="color:#ff79c6">]</span> <span style="color:#ff79c6">{</span>
</span></span><span style="display:flex;"><span>      println<span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;You get a new instance of Show[Int] ...&#34;</span><span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ff79c6">override</span> <span style="color:#ff79c6">def</span> show<span style="color:#ff79c6">(</span>n<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Int</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">:</span> <span style="color:#8be9fd">String</span> <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">s&#34;Int(</span><span style="color:#f1fa8c">$n</span><span style="color:#f1fa8c">)&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#6272a4">// contrast that with `val showInt: Show[Int] = ...`
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">def</span> foo<span style="color:#ff79c6">(</span>n<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Int</span><span style="color:#ff79c6">)(</span><span style="color:#ff79c6">implicit</span> S<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Show</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">Int</span><span style="color:#ff79c6">])</span><span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Unit</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{</span>
</span></span><span style="display:flex;"><span>    println<span style="color:#ff79c6">(</span>S<span style="color:#ff79c6">.</span>show<span style="color:#ff79c6">(</span>n<span style="color:#ff79c6">))</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  foo<span style="color:#ff79c6">(</span><span style="color:#bd93f9">42</span><span style="color:#ff79c6">)</span> <span style="color:#6272a4">// You get a new instance of Show[Int] ...
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>  foo<span style="color:#ff79c6">(</span><span style="color:#bd93f9">10</span><span style="color:#ff79c6">)</span> <span style="color:#6272a4">// You get a new instance of Show[Int] ...
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span><span style="color:#ff79c6">}</span>
</span></span></code></pre></div><p>I chose a different example for the above so that you can copy the code and run it. If <code>showInt</code> was a <code>val</code>, you would see the message print only once ever because the compiler would create the instance and cache it. Not so in the case of <code>def</code>. In other words, once for <code>implicit val</code>s or each time an implicit value is needed for <code>implicit def</code>s.</p>
<p>You would declare a <code>def</code> &hellip;</p>
<ul>
<li>if the implicit instance is type parameterized e.g. <code>implicit def foo[A]: XYZ = ...</code></li>
<li>if there is some state associated with the implicit instance during its creation.</li>
</ul>
<blockquote>
<p>It is important to know how an implicit parameter value is going to be created. Not only <code>implicit val</code> s and <code>implicit def</code> s but if the implicit is backed by a macro. Macro backed implicits generate code creating the  implicit value. The code generation is tied to the number of times the implicit is referenced / evaluated, which directly affects compilation time.</p>
</blockquote>
<h3 id="type-converters">Type converters</h3>
<p>Implicit type converters are infamous, and generally speaking, should be avoided. But they do have their place; especially if you are not in the <em>implicits are hard and bad</em> camp.</p>
<p>Compiler is all about types - define, create, manage, derive, convert etc. Say, you have a function <code>def triple(n: Long)</code> . You cannot call the function passing it an <code>Int</code>. You should expect an error because types are different. However, the compiler does not give up in the first go. It is going to look around for a way to convert <code>Int</code> to <code>Long</code>. Perhaps there is an overloaded function (which is not the case here), and so on. In the list of things it will look for is the <em>implicit type conversion</em> function. Something of the sort &hellip;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#ff79c6">implicit</span> <span style="color:#ff79c6">def</span> int2Long<span style="color:#ff79c6">(</span>n<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Int</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Long</span> <span style="color:#ff79c6">=</span> n<span style="color:#ff79c6">.</span>toLong
</span></span></code></pre></div><p>The declaration should be self-explanatory - give me <code>Int</code>, take a <code>Long</code>. Just that it is declared <code>implicit</code>, which means the compiler will invoke this function, if in scope, to convert <code>n</code> to <code>Long</code> before calling <code>triple</code>.</p>
<p>In fact, such implicit conversions are declared in the standard library to make life easier &hellip; for the meek. For the strong-hearted, there are compiler flags to report such conversions as warnings. Top that with <code>-X:fatal-warnings</code> flag to report warnings as errors. That means such implicit conversions would be prohibited and you have to use <code>.toLong</code> yourself making it explicit and putting the responsibility of the conversion on you, which is right.</p>
<p>Why is implicit type conversion highly discouraged? Because it can kick in unintentionally just because a conversion is in scope. This usually leads to unexpected behavior and bugs  that would require few mugs of coffee to troubleshoot/find/fix. Scala 3 has a <code>Conversion</code> typeclass which is the explicit version of the type conversion. It is adding discipline to the conversion and making the it available implicitly. But the actual call to conversion is explicit. In fact, it is not hard at all define such a typeclass if you are using Scala 2.</p>
<p>The type conversion discussed above is not restricted to scalar types. It could be for any two types. When you define a type conversion, you must really know what you are doing. That you really need it and it will not get you in trouble unintentionally.</p>
<p>Here is how an implicit type conversion is used beautifully in <a href="https://github.com/typelevel/cats">cats</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#ff79c6">final</span> <span style="color:#ff79c6">case</span> <span style="color:#ff79c6">class</span> <span style="color:#50fa7b">ShowInterpolator</span><span style="color:#ff79c6">(</span><span style="color:#50fa7b">_sc</span><span style="color:#ff79c6">:</span> <span style="color:#8be9fd">StringContext</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">extends</span> <span style="color:#50fa7b">AnyVal</span> <span style="color:#ff79c6">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">def</span> show<span style="color:#ff79c6">(</span>args<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Shown*</span><span style="color:#ff79c6">)</span><span style="color:#ff79c6">:</span> <span style="color:#8be9fd">String</span> <span style="color:#ff79c6">=</span> <span style="color:#50fa7b">_sc</span><span style="color:#ff79c6">.</span>s<span style="color:#ff79c6">(</span>args<span style="color:#ff79c6">:</span> <span style="color:#ff79c6">_</span><span style="color:#8be9fd">*</span><span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">final</span> <span style="color:#ff79c6">case</span> <span style="color:#ff79c6">class</span> <span style="color:#50fa7b">Shown</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">override</span> <span style="color:#ff79c6">val</span> toString<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">String</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">extends</span> <span style="color:#50fa7b">AnyVal</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">object</span> <span style="color:#50fa7b">Shown</span> <span style="color:#ff79c6">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#6272a4">// This is where the magic happens! Every type you provide in show&#34;...&#34; is
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>  <span style="color:#6272a4">// converted to `Shown` as long as there is an implicit Show[A] available.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>  <span style="color:#6272a4">// Shown is just a type to denote that the value is stringified.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>  <span style="color:#ff79c6">implicit</span> <span style="color:#ff79c6">def</span> mat<span style="color:#ff79c6">[</span><span style="color:#8be9fd">A</span><span style="color:#ff79c6">](</span>x<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">A</span><span style="color:#ff79c6">)(</span><span style="color:#ff79c6">implicit</span> z<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">ContravariantShow</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">A</span><span style="color:#ff79c6">])</span><span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Shown</span> <span style="color:#ff79c6">=</span> <span style="color:#50fa7b">Shown</span><span style="color:#ff79c6">(</span>z<span style="color:#ff79c6">.</span>show<span style="color:#ff79c6">(</span>x<span style="color:#ff79c6">))</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">}</span>
</span></span></code></pre></div><p>Read more on <code>Show</code> <a href="https://github.com/typelevel/cats/blob/f4aec7f6e0fe9e3001234d786a86555ce31bc101/core/src/main/scala/cats/Show.scala#L73">here</a>.</p>
<p>Generally speaking, if you are about to write a type conversion, think twice. Read about it. Consult with your peers.</p>
<h3 id="dynamic-instances">Dynamic Instances</h3>
<p>This one is my favorite. Because it gives more than what you put in.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#6272a4">// Not the cats.Show but just our own version of Show
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span><span style="color:#ff79c6">implicit</span> <span style="color:#ff79c6">val</span> showString<span style="color:#ff79c6">:</span>              <span style="color:#8be9fd">Show</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">String</span><span style="color:#ff79c6">]</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">_</span><span style="color:#ff79c6">.</span>toString
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">implicit</span> <span style="color:#ff79c6">def</span> showNumeric<span style="color:#ff79c6">[</span><span style="color:#8be9fd">A:</span> <span style="color:#8be9fd">Numeric</span><span style="color:#ff79c6">]</span><span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Show</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">A</span><span style="color:#ff79c6">]</span>      <span style="color:#ff79c6">=</span> n <span style="color:#ff79c6">=&gt;</span> <span style="color:#f1fa8c">s&#34;</span><span style="color:#f1fa8c">${</span>n<span style="color:#ff79c6">.</span>getClass<span style="color:#ff79c6">.</span>getSimpleName<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">(</span><span style="color:#f1fa8c">$n</span><span style="color:#f1fa8c">)&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">implicit</span> <span style="color:#ff79c6">def</span> showOption<span style="color:#ff79c6">[</span><span style="color:#8be9fd">A</span><span style="color:#ff79c6">](</span><span style="color:#ff79c6">implicit</span> A<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Show</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">A</span><span style="color:#ff79c6">])</span><span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Show</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">Option</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">A</span><span style="color:#ff79c6">]]</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">case</span> <span style="color:#50fa7b">None</span>    <span style="color:#ff79c6">=&gt;</span> <span style="color:#f1fa8c">&#34;None&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">case</span> <span style="color:#50fa7b">Some</span><span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">=&gt;</span> <span style="color:#f1fa8c">s&#34;Some(</span><span style="color:#f1fa8c">${</span>A<span style="color:#ff79c6">.</span>show<span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">)</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">)&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">implicit</span> <span style="color:#ff79c6">def</span> showEither<span style="color:#ff79c6">[</span><span style="color:#8be9fd">L</span>, <span style="color:#8be9fd">R</span><span style="color:#ff79c6">](</span><span style="color:#ff79c6">implicit</span> L<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Show</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">L</span><span style="color:#ff79c6">],</span> R<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Show</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">R</span><span style="color:#ff79c6">])</span><span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Show</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">Either</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">L</span>, <span style="color:#8be9fd">R</span><span style="color:#ff79c6">]]</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">case</span> <span style="color:#50fa7b">Left</span><span style="color:#ff79c6">(</span>l<span style="color:#ff79c6">)</span>  <span style="color:#ff79c6">=&gt;</span> <span style="color:#f1fa8c">s&#34;Left(</span><span style="color:#f1fa8c">${</span>L<span style="color:#ff79c6">.</span>show<span style="color:#ff79c6">(</span>l<span style="color:#ff79c6">)</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">)&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">case</span> <span style="color:#50fa7b">Right</span><span style="color:#ff79c6">(</span>r<span style="color:#ff79c6">)</span> <span style="color:#ff79c6">=&gt;</span> <span style="color:#f1fa8c">s&#34;Right(</span><span style="color:#f1fa8c">${</span>R<span style="color:#ff79c6">.</span>show<span style="color:#ff79c6">(</span>r<span style="color:#ff79c6">)</span><span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">)&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">}</span>
</span></span></code></pre></div><p>The above modest piece of implicit code does something wonderful - <em>Recursive implicit resolution</em>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:2;-o-tab-size:2;tab-size:2;"><code class="language-scala" data-lang="scala"><span style="display:flex;"><span><span style="color:#ff79c6">def</span> showMe<span style="color:#ff79c6">[</span><span style="color:#8be9fd">A</span><span style="color:#ff79c6">](</span>a<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">A</span><span style="color:#ff79c6">)(</span><span style="color:#ff79c6">implicit</span> ev<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Show</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">A</span><span style="color:#ff79c6">])</span><span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Unit</span> <span style="color:#ff79c6">=</span>
</span></span><span style="display:flex;"><span>  println<span style="color:#ff79c6">(</span>ev<span style="color:#ff79c6">.</span>show<span style="color:#ff79c6">(</span>a<span style="color:#ff79c6">))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>showMe<span style="color:#ff79c6">(</span><span style="color:#50fa7b">Option</span><span style="color:#ff79c6">(</span><span style="color:#50fa7b">Option</span><span style="color:#ff79c6">(</span><span style="color:#bd93f9">100</span><span style="color:#ff79c6">)))</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">val</span> e<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Either</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">String</span>, <span style="color:#8be9fd">Int</span><span style="color:#ff79c6">]</span> <span style="color:#ff79c6">=</span> <span style="color:#50fa7b">Right</span><span style="color:#ff79c6">(</span><span style="color:#bd93f9">200</span><span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>showMe<span style="color:#ff79c6">(</span>e<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">val</span> foo<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Either</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">Option</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">Either</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">String</span>, <span style="color:#8be9fd">Double</span><span style="color:#ff79c6">]]</span>, <span style="color:#8be9fd">Int</span><span style="color:#ff79c6">]</span> <span style="color:#ff79c6">=</span> <span style="color:#50fa7b">Left</span><span style="color:#ff79c6">(</span><span style="color:#50fa7b">Some</span><span style="color:#ff79c6">(</span><span style="color:#50fa7b">Left</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;Success&#34;</span><span style="color:#ff79c6">)))</span>
</span></span><span style="display:flex;"><span>showMe<span style="color:#ff79c6">(</span>foo<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">val</span> bar<span style="color:#ff79c6">:</span> <span style="color:#8be9fd">Either</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">Option</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">Either</span><span style="color:#ff79c6">[</span><span style="color:#8be9fd">String</span>, <span style="color:#8be9fd">Double</span><span style="color:#ff79c6">]]</span>, <span style="color:#8be9fd">Int</span><span style="color:#ff79c6">]</span> <span style="color:#ff79c6">=</span> <span style="color:#50fa7b">Left</span><span style="color:#ff79c6">(</span><span style="color:#50fa7b">Some</span><span style="color:#ff79c6">(</span><span style="color:#50fa7b">Right</span><span style="color:#ff79c6">(</span><span style="color:#bd93f9">3.142</span><span style="color:#ff79c6">)))</span>
</span></span><span style="display:flex;"><span>showMe<span style="color:#ff79c6">(</span>bar<span style="color:#ff79c6">)</span>
</span></span></code></pre></div><p>If it is able to find an implicit <code>Show</code> instance for <code>A</code> then <code>showOption</code> would be able to give the string version of the type. Now, <code>A</code> could be anything. Even another <code>Option</code>, which in turn will look for its <code>Show[A]</code> instance. Or it could be an <code>Either</code>. Particularly, see how<code>foo</code> and <code>bar</code> recursively resolve implicits!</p>
<blockquote>
<p>Special thanks to <a href="https://github.com/morgen-peschke">Morgen Peschke</a> for proof-reading and elevating the quality of this post. And in the process improving my understanding<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup> about implicits.</p>
</blockquote>
<p><small>Featured image courtesy: <a href="https://unsplash.com/photos/vehicle-window-with-water-particles-Q4Fx0JYCYWc">Unsplash</a></small></p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>In this case, <code>registerUser</code> is not directly using the <code>ExecutionContext</code> but passing it along to the <code>Future</code>. In any case, the point is <code>registerUser</code> takes an <code>implicit</code> parameter.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>That&rsquo;s whole big topic for another day!&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3">
<p>There are a couple more posts in the making. ðŸ˜‰&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

</div>


	</main>

	<footer>
  <div>
    &copy;  2024

    

    
  </div>
</footer>


	<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
					integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0="
					crossorigin="anonymous"></script>

	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding:wght@400;700&display=swap" />









	<script src="https://unpkg.com/lunr@2.3.9/lunr.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="/js/search.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

	

	<script>
	window.store = {
	  
	  
	}

	hljs.highlightAll();

	document
		.querySelector('.blog-search-input')
		.addEventListener('keyup', function (event) {
			event.preventDefault();

			if (event.keyCode === 13) {
				document.querySelector('.blog-search-box>form>input').value = 
					document.querySelector('.blog-search-input').value;

				document
					.querySelector('.blog-search-box>form')
					.submit(
);
			}
		});
	</script>

	
</body>

</html>
